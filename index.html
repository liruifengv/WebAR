<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>调用摄像头拍照 </title>
    <style>
        #videoBox{position: absolute;left: 50%;top: 50%;z-index: 1;-webkit-transform: translate(-50%,-50%);-webkit-transform-origin: 50% 50%;}
        #videoWrap{position: relative;left: 0;top: 0;background: #4CAABE;overflow: hidden;}
    </style>
  <script src="/vconsole.min.js"></script>
</head>
<body>
    <div id="videoWrap">
        <video autoplay="autoplay" id="videoBox"></video>
    </div>
<script>
    var videoWrap = document.getElementById('videoWrap');
    videoWrap.style.width = window.innerWidth + 'px';
    videoWrap.style.height = window.innerHeight + 'px';
    getMedia();
    function getMedia() {  
        var exArray = []; //存储设备源ID  
        if (navigator.getUserMedia) {  
            MediaStreamTrack.getSources(function (sourceInfos) { 
                for (var i = 0; i != sourceInfos.length; ++i) {  
                    var sourceInfo = sourceInfos[i];  
                    //这里会遍历audio,video，所以要加以区分  
                    if (sourceInfo.kind === 'video') {  
                        exArray.push(sourceInfo.id);  
                    }  
                }
                navigator.getUserMedia({  
                    'video': {  
                        'optional': [{  
                            'sourceId': exArray[1] //0为前置摄像头，1为后置  
                        }]  
                    },
                    'audio':false  
                }, successFunc, errorFunc); 
            });
        }
    }  
    var localStream;
    function successFunc(stream) {  
        document.getElementById('video').src = window.URL && window.URL.createObjectURL(stream) || stream;
        localStream = stream;  
    }  

    function errorFunc(e) {  
        alert('Error！'+e);  
    }  
    function closeMedia() {  
        localStream.stop();
        document.getElementById('video').src = '';
    }

</script>
</body>
</html>