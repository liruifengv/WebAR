<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>调用摄像头拍照 </title>
    <style>
        #videoBox{position: absolute;left: 0;top: 0;right:0;bottom:0;z-index: 1;}
        #videoWrap{position: relative;left: 0;top: 0;background: #4CAABE;overflow: hidden;}
    </style>
</head>
<body>
    <div id="videoWrap">
        <video autoplay="autoplay" id="videoBox"></video>
    </div>
<script>
    var videoWrap = document.getElementById('videoWrap');
    let video = document.getElementById('videoBox')

    videoWrap.style.width = window.innerWidth + 'px';
    videoWrap.style.height = window.innerHeight + 'px';

  function getUserMedia(constrains,success,error) {
    if (navigator.mediaDevices.getUserMedia) {
      navigator.mediaDevices.getUserMedia(constrains).then(success).catch(error)
    } else if (navigator.webkitGetUserMedia) {
      navigator.webkitGetUserMedia(constrains,success.error)
    } else if (navigator.mozGetUserMedia) {
      navigator.mozkitGetUserMedia(constrains,success.error)
    } else if (navigator.getUserMedia) {
      navigator.getUserMedia(constrains,success,error)
    }
  }
  function success(stream) {
    if(!stream) {
        alert('stream:',stream)
    }
    let CompatibleUrl = window.URL || window.webkitURL
    video.src = CompatibleUrl.createObjectURL(stream)
    video.play()
  }
  function error(error) {
    alert('ERROR:',error.name,error.message)
  }
  
  if (navigator.mediaDevices.getUserMedia || navigator.getUserMedia || navigator.mozGetUserMedia || navigator.webkitGetUserMedia) {
    getUserMedia({video:{ facingMode: { exact: "environment" },width: window.innerWidth, height: window.innerHeight }},success,error)
  } else {
    alert('you bower id not getUserMedia')
  }

</script>
</body>
</html>